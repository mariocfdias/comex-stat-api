# Repository Guidelines

## Project Structure & Module Organization
The NestJS application lives in `src/`, with `main.ts` bootstrapping `AppModule` and configuring Swagger at `/api`. Domain features sit under `src/comexstat`, where controllers, services, DTOs, and specs co-reside for tight cohesion. Shared contracts live in `src/types`. Testing harnesses stay in `test/`, while the build output lands in `dist/`â€”never edit generated files. CLI and tooling configs live at the repo root (`nest-cli.json`, `tsconfig*.json`, `eslint.config.mjs`).

## Build, Test, and Development Commands
`npm run start:dev` launches a watch-mode server. `npm run build` transpiles TypeScript (ES2023, NodeNext) into `dist/`, and `npm run start:prod` executes that bundle. Enforce quality with `npm run lint` (ESLint + Prettier) and auto-format with `npm run format`. Use `npm run test`, `npm run test:watch`, and `npm run test:cov` for unit suites, watch mode, and coverage checks; run end-to-end flows with `npm run test:e2e`.

## Coding Style & Naming Conventions
Prettier defaults dictate 2-space indentation, single quotes, and trailing commas where valid. Keep Nest providers, controllers, and DTOs in PascalCase with suffixes (`ComexstatService`, `CreateReportDto`); module filenames stay kebab-case (`comexstat.controller.ts`). Prefer constructor injection and typed `async` methods. Avoid disabling lint rules unless you document the exception in the PR. Align imports to project-relative paths and re-export shared interfaces from barrel files only when it clarifies usage.

## Testing Guidelines
Place unit specs alongside source as `<name>.spec.ts` and focus on public API behavior. Leverage `jest.spyOn` for service dependencies and stub HTTP or Redis clients. Keep coverage above the baseline generated by `npm run test:cov`; inspect `coverage/lcov-report/index.html` for gaps. Structure e2e tests in `test/` to mirror REST endpoints, using `supertest` for HTTP assertions and cleaning state in `afterEach`.

## Commit & Pull Request Guidelines
The repository has no canonical history yet, so adopt Conventional Commit prefixes (`feat:`, `fix:`, `chore:`) and module-scoped subjects (`feat(comexstat): add DTO validation`). Keep commits focused and runnable. Pull requests should include a concise summary, linked issue or ticket reference, screenshots or Swagger diffs for contract changes, and local verification steps (`npm run lint && npm run test`). Request review only after CI passes and configuration changes are documented.

## Environment & Security Notes
Configure runtime settings through environment variables (e.g., `PORT`) and keep secrets in untracked `.env` files. Wire validation decorators in DTOs to safeguard downstream services. Review Swagger output after module changes and gate sensitive routes appropriately. Document cache or Redis requirements whenever new providers depend on them.
